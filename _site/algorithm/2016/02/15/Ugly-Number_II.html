

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<title>Ugly Number II</title>
    
	
	<meta name="author" content="Jian Wang">
	
	<link rel="stylesheet" href="/assets/themes/Snail/css/jquery.fancybox.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/main.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/pages/journal.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/team.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/static.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/errors.css">
	<link rel="stylesheet" href="/assets/themes/Snail/google-code-prettify/prettify.css">
	
	<link rel="shortcut icon" href="/assets/themes/Snail/img/favicon.ico">
	
	<script type="text/javascript" src="/assets/themes/Snail/js/jquery.min.js"></script>
	
	<script type="text/javascript" src="/assets/themes/Snail/js/auto_loadmore.js"></script>
	
	<script type="text/javascript" src="/assets/themes/Snail/google-code-prettify/prettify.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>	
	
        <script type="text/javascript">
	  $(function(){
		$("pre code").addClass("prettyprint linenums");
		prettyPrint();
	  });
	</script>
	
<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
</head>
<body>
	<noscript>
		&amp;lt;div id="no-js"&amp;gt;Please enable JavaScript in your browser to experience / fully&amp;lt;/div&amp;gt;
	</noscript>
    <div id="page-container">
		<div>
			<nav>
	<div id="nav-l">
	</div>
	<div id="nav-c">
		<ul id="nav-list" style="width: 700px;">
			<li id="home"><a href="/">Home</a></li>
			
			
			
				
				  
				
			 
				
				  
					
					<li id = "About Me"><a href="/about">About Me</a></li>
					
				  
				
			 
				
				  
					
					<li id = "Archive"><a href="/archive">Archive</a></li>
					
				  
				
			 
				
				  
				
			 
				
				  
					
					<li id = "Categories"><a href="/categories">Categories</a></li>
					
				  
				
			 
				
			 
				
				  
				
			 
				
				  
				
			 
				
				  
				
			 
				
				  
					
					<li id = "Tags"><a href="/tags">Tags</a></li>
					
				  
				
			 
				
			 
				
			 
				
			 
				
			 
				
			 
				
			 
				
			 
			
			
		</ul>
		<form id="nav-search" method="GET" action="/search.html">
			<div id="search-right-pix">
				<div id="search-left-pix">
					<div id="search-center-pix">
						<div id="search-icon-pix"></div>
						<input name="query" type="text" placeholder="Search">
					</div>
				</div>
			</div>
		</form>
		
		
	</div>
	<div id="nav-r">
	</div>
</nav>
			<div id="page-content">
				

<div id="page-content">
	<div class="cont932">
	<div id="journal-articles-block">
		<div class="journal-article">
			<div class="journal-post-info">
				<div class="journal-cat-box">
				
				
				<div class="journal-cat-box">

<a href="/categories.html#algorithm-ref" title="algorithm">
	algorithm

</a>
</div>
				
				</div>
			</div>
			<div class="journal-body">
				<h1 class="journal-title">Ugly Number II<span class="author">by Jian</span>
				</h1>
				<span class="the-article">
				<p>Problem 264 Ugly Number II</p>

<p>Write a program to find the n-th ugly number.</p>

<p>Ugly numbers are positive numbers whose prime factors only include 2, 3, 5. For example, 1, 2, 3, 4, 5, 6, 8, 9, 10, 12 is the sequence of the first 10 ugly numbers.</p>

<p>Note that 1 is typically treated as an ugly number.</p>

<p>Hint: The naive approach is to call isUgly for every number until you reach the nth one. Most numbers are not ugly. Try to focus your effort on generating only the ugly ones. An ugly number must be multiplied by either 2, 3, or 5 from a smaller ugly number.</p>

<p>Example 1:</p>

<p>n = 10 return 12</p>

<!--more-->

<h2 id="solution">Solution</h2>

<ul>
  <li>C++</li>
</ul>

<h2 id="analysis">Analysis</h2>

<p>解法1: Brute Force： 此暴力破解还稍微带点动态规划的意味在里面。 思路是利用它的一个规律。 打个比喻：即从最小的丑数开始，“1， 2，3，4，5…”，你会发现如果把前面这串数字当成一个保龄球轨道的话，那么“2，3，5”这个就是一个滚动的保龄球，从头开始滚动，保龄球与轨道接触的那一面的数字相乘的结果（去重复后）往轨道最后放。相切的点就是的结果。但是这样的方法有很多明显的缺陷，为了去重要多花费2n的空间（6<em>3等于9</em>2重复） ，而且实际执行的次数要多于n。</p>

<p>解法2: 三指针： 与以上解法相比，此解法发现了真正的pattern。还拿以上例子来讲，就是把保龄球换成蜗牛，三个蜗牛（数字分别是2，3，5）起初都在起跑线上，谁与轨道的乘积最小谁就往前爬一步，这样当出现重复数字的时候，都会在同一个循环里，（即3<em>6与2</em>9两个最小值在同时出现，那么两者都往前爬一步），这样就省了去重复的多余空间和操作。</p>

<p><strong>复杂度</strong></p>

<p>时间：O(n)</p>

<p>空间：O(n)</p>

<p><strong>实现一(cpp)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Solution { public:
long long nthUglyNumber1(int n) {
 if (n == 0) return 0;
 unordered_set&lt;long long&gt; set1;
 vector&lt;int&gt; ugly = {2,3,5};
 priority_queue&lt;long long&gt; queue1;
 for (int i = 1; i &lt; 6; i++ ) {
   queue1.push(-i);
   set1.emplace(i);
 }
 long long result;
 for (int i = 0; i &lt; k; i++) {
   result = -queue1.top();
   queue1.pop();
   for (int j = 0; j &lt; 3; j++) {
     if (set1.find(ugly[j]*result) == set1.end()) {
       queue1.push(-ugly[j]*result);
       set1.emplace(ugly[j]*result);
     }
   }
 }
 return result;   }
};
</code></pre>
</div>

<p><strong>复杂度</strong></p>

<p>时间：O(n)</p>

<p>空间：O(n)</p>

<p><strong>实现二(cpp)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Solution { public:
int nthUglyNumber(int n) {    
    vector&lt;int&gt; result(1, 1);
    int i2 = 0, i3 = 0, i5 = 0;
    while (result.size() &lt; n) {
        int m2 = result[i2] * 2, 
            m3 = result[i3] * 3, 
            m5 = result[i5] * 5;
        int mn = min(m2, min(m3, m5));
        if (mn == m2) ++i2;
        if (mn == m3) ++i3;
        if (mn == m5) ++i5;
        result.push_back(mn);
    }
    return result.back();
}
};
</code></pre>
</div>

<ul>
  <li>596 / 596 test cases passed.</li>
  <li>Status: Accepted</li>
  <li>Runtime: 20 ms</li>
  <li>Beats: 48.17%</li>
</ul>

<p><strong>实现三(cpp)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>public class Solution {
public int nthUglyNumber(int n) {
    int[] ugly = new int[n];
    int v2 = 1, v3 = 1, v5 = 1;
    int i2 = 0, i3 = 0, i5 = 0;
    for (int k = 0; k &lt; n; ++k) {
        int v = Math.min(v2, Math.min(v3, v5));
        ugly[k] = v;
        if (v2 == v) v2 = ugly[i2++] * 2;
        if (v3 == v) v3 = ugly[i3++] * 3;
        if (v5 == v) v5 = ugly[i5++] * 5;
    }
    return ugly[n-1];
}
}
</code></pre>
</div>

<ul>
  <li>596 / 596 test cases passed.</li>
  <li>Status: Accepted</li>
  <li>Runtime: 8 ms</li>
  <li>Beats: 90.84%</li>
</ul>

<p><strong>实现四(Java)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>public class Solution {
public int nthUglyNumber(int n) {
    int[] ugly = new int[n];
    int v2 = 1, v3 = 1, v5 = 1;
    int i2 = 0, i3 = 0, i5 = 0;
    for (int k = 0; k &lt; n; ++k) {
        int v = Math.min(v2, Math.min(v3, v5));
        ugly[k] = v;
        if (v2 == v) v2 = ugly[i2++] * 2;
        if (v3 == v) v3 = ugly[i3++] * 3;
        if (v5 == v) v5 = ugly[i5++] * 5;
    }
    return ugly[n-1];
}
}
</code></pre>
</div>

<ul>
  <li>596 / 596 test cases passed.</li>
  <li>Status: Accepted</li>
  <li>Runtime: 8 ms</li>
  <li>Beats: 85.65%</li>
</ul>

<p><strong>实现五(Python)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>def nthUglyNumber(self, n):
ugly = [1] * n
i2 = i3 = i5 = -1
x = v2 = v3 = v5 = 1
for k in xrange(n):
    x = min(v2, v3, v5)
    ugly[k] = x
    if x == v2:
        i2 += 1
        v2 = ugly[i2] * 2
    if x == v3:
        i3 += 1
        v3 = ugly[i3] * 3
    if x == v5:
        i5 += 1
        v5 = ugly[i5] * 5
return x
</code></pre>
</div>

<ul>
  <li>596 / 596 test cases passed.</li>
  <li>Status: Accepted</li>
  <li>Runtime: 176 ms</li>
  <li>94.23%</li>
</ul>

<p>Contribution</p>

<p><a href="http://jianwang.info/">@jianw851</a></p>

<h2 id="reference">Reference</h2>

<p>[^1] <a href="https://leetcode.com/problems/ugly-number-ii/">264. Ugly Number II </a></p>

<p>[^2] <a href="http://www.cnblogs.com/grandyang/p/4743837.html">博客园Grandyang</a></p>

<hr />

				</span>
				<div class="journal-date">Published 15 February 2016</div>
				<div class="journal-tags">
				
				
	 
		<a class="tag-cont" href="/tags.html#Dynamic Programming-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Dynamic Programming</div>
			<div class="tag-r"></div>
		</a>
	 
		<a class="tag-cont" href="/tags.html#Math-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Math</div>
			<div class="tag-r"></div>
		</a>
	 
		<a class="tag-cont" href="/tags.html#Heap-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Heap</div>
			<div class="tag-r"></div>
		</a>
	 
		<a class="tag-cont" href="/tags.html#Three Pointer-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Three Pointer</div>
			<div class="tag-r"></div>
		</a>
	



				</div>
			</div>
		</div>
		<div class="clearboth"></div>
	</div>
</div>
	<div class="clearboth"></div>
	


  <!-- 多说评论框 start -->
<div id="comments">
    <div class="ds-thread" data-thread-key="/algorithm/2016/02/15/Ugly-Number_II"  data-title="Ugly Number II - Welcome to"></div>
</div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"jian"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->



	<div class="clearboth"></div>
</div>

			</div>
			<div class="clearboth pagebottom"></div>
		</div>
	</div>
	﻿<footer>
	<div class="footer-940">
		<div class="footer-general-info">
			© 2015 Jian Wang.<br><br>
			Content licensed under:<br>
			<a class="cc" href="http://creativecommons.org/licenses/by-sa/3.0/">c a b</a><br>
			<a href = "/about.html">About Me</a><br>
		</div>
		<div class="footer-col-cont">
			<div class="footer-nav-col">
				<h4><a>Categories</a></h4>
				<ul>
					
					


  
     
    	<li><a href="/categories.html#trick-ref">
    		trick <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#read-ref">
    		read <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#daily-ref">
    		daily <span>3</span>
    	</a></li>
     
    	<li><a href="/categories.html#idea-ref">
    		idea <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#algorithm-ref">
    		algorithm <span>26</span>
    	</a></li>
     
    	<li><a href="/categories.html#Technology-ref">
    		Technology <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#learn-ref">
    		learn <span>1</span>
    	</a></li>
    
  


				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Pages</a></h4>
				<ul>
					
					
					


  
    
      
    
  
    
      
      	
      	<li><a href="/about">About Me</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categories</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Feed</a></h4>
				<ul>
					<li><a href="/atom.xml">Atom Feed</a></li>
					<li><a href="/rss.xml">RSS Feed</a></li>
				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Links</a></h4>
				<ul>
				 
					<li><a href = "http://jianwang.info/">Jian Wang's Blog</a></li>
				
				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a href = "/about.html">About Me</a></h4>
				<ul>
				 
					<li><a href = "mailto:jianw851@gmail.com">e-mail</a></li>
				 
					<li><a href = "https://github.com/jianw851">Github</a></li>
				 
					<li><a href = "https://cn.linkedin.com/in/jianwang85">Linkedin</a></li>
				
				</ul>
			</div>
			<div class="clearboth"></div>
		</div>
		<div class="clearboth"></div>
	</div>
	<div class="clearboth"></div>
</footer>

	
</body>
</html>

